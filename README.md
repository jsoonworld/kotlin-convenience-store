# 기능 요구사항

## 결제 시스템

- [ ] 사용자가 입력한 상품 가격과 수량을 기반으로 최종 결제 금액을 계산한다. 
  - 총 구매액 = (상품 가격 × 수량)
  - 프로모션/멤버십 할인 반영
- [ ] 구매 내역 및 금액 정보를 영수증으로 출력
- [ ] 영수증 출력 후 추가 구매 여부 선택 가능
- [ ] 잘못된 값 입력 시 IllegalArgumentException 발생 및 [ERROR] 메시지 출력 후 다시 입력

## 재고 관리
- [ ] 재고 수량 기반으로 결제 가능 여부 확인
- [ ] 결제 시 해당 상품 재고 차감
- [ ] 최신 재고 상태 유지 및 다음 고객 반영

## 프로모션 할인
- [ ] 오늘 날짜가 프로모션 기간 내에 있을 경우 적용
  - 형식: N개 구매 시 1개 무료 (Buy N Get 1 Free)
- [ ] 한 상품당 하나의 프로모션만 적용됨
- [ ] 프로모션 재고 내에서만 적용 가능
- [ ] 프로모션 적용 시 우선적으로 프로모션 재고 차감 → 부족 시 일반 재고 사용
- [ ] 수량 부족 시 추가 유도 메시지 출력
- [ ] 프로모션 재고 부족 시 일부 정가 결제 안내

## 멤버십 할인
- [ ] 멤버십 회원: 프로모션 미적용 금액의 30% 할인
- [ ] 최대 8,000원까지 할인 적용

## 영수증 출력 항목
- [ ] 구매 상품 내역 (상품명, 수량, 가격)
- [ ] 증정 상품 내역
  - [ ] 금액 정보:
      - [ ] 총구매액
      - [ ] 행사할인
      - [ ] 멤버십할인
      - [ ] 내실돈 (최종 결제 금액)
- [ ] 보기 좋게 정렬하여 출력

## 입출력 요구 사항


## 입력

- [x] 구현에 필요한 상품 목록과 행사 목록을 파일 입출력을 통해 불러온다.
  - `src/main/resources/products.md`와 `src/main/resources/promotions.md` 파일을 이용한다.
  - 두 파일 모두 **내용의 형식을 유지한다면 값은 수정 가능**하다.
- [x] **구매할 상품과 수량**을 입력 받는다.
    - [x] 상품명과 수량은 하이픈()으로 구분하고, 개별 상품은 대괄호(`[]`)로 묶으며 쉼표(`,`)로 구분한다.
  ```kotlin
  [콜라-10],[사이다-3]
  ```
- [ ] 프로모션 적용이 가능한 상품에 대해 고객이 해당 수량보다 적게 가져온 경우, 추가 여부를 입력 받는다.
  - `Y`: 일부 수량 정가로 결제함
  - `N`: 정가로 결제해야 하는 수량 제외 후 결제 진행
- [x] **멤버십 할인 적용 여부**를 입력 받는다.
  - `Y`: 멤버십 할인 적용
  - `N`: 멤버십 할인 미적용
- [ ] **추가 구매 여부**를 입력 받는다.
  - `Y`: 재고가 업데이트된 상품 목록 확인 후 추가 구매 진행
  - `N`: 구매 종료

## 출력
- [x] 환영 인사 및 상품 목록 출력 (재고가 0이면 재고 없음 표시)
```kotlin
안녕하세요. W편의점입니다.
현재 보유하고 있는 상품입니다.

- 콜라 1,000원 10개 탄산2+1
- 콜라 1,000원 10개
- 사이다 1,000원 8개 탄산2+1
- 사이다 1,000원 7개
...
```

- [x] 구매 입력 안내 문구
```kotlin
구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])
```

- [ ] 프로모션 적용 안내
```kotlin
현재 {상품명}은(는) 1개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)
```


- [ ] 프로모션 재고 부족 안내
```kotlin
현재 {상품명} {수량}개는 프로모션 할인이 적용되지 않습니다. 그래도 구매하시겠습니까? (Y/N)
```

- [ ] 멤버십 할인 안내
```kotlin
멤버십 할인을 받으시겠습니까? (Y/N)
```


- [ ] 결제 결과 출력
```kotlin
===========W 편의점=============
상품명		수량	금액
콜라		3 	3,000
에너지바 		5 	10,000
===========증	정=============
콜라		1
==============================
총구매액		8	13,000
행사할인			-1,000
멤버십할인			-3,000
내실돈			 9,000
```

- [ ] 추가 구매 여부 안내
```kotlin
감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
```

- [ ] 잘못된 입력에 대한 오류 메시지
```kotlin
[ERROR] 올바르지 않은 형식으로 입력했습니다. 다시 입력해 주세요.
[ERROR] 존재하지 않는 상품입니다. 다시 입력해 주세요.
[ERROR] 재고 수량을 초과하여 구매할 수 없습니다. 다시 입력해 주세요.
[ERROR] 잘못된 입력입니다. 다시 입력해 주세요.
```

- 실행 결과 예시

- [ ] 추가 구매 여부 안내
```kotlin
안녕하세요. W편의점입니다.
현재 보유하고 있는 상품입니다.

- 콜라 1,000원 10개 탄산2+1
- 콜라 1,000원 10개
        - 사이다 1,000원 8개 탄산2+1
- 사이다 1,000원 7개
        - 오렌지주스 1,800원 9개 MD추천상품
- 오렌지주스 1,800원 재고 없음
        - 탄산수 1,200원 5개 탄산2+1
- 탄산수 1,200원 재고 없음
        - 물 500원 10개
        - 비타민워터 1,500원 6개
        - 감자칩 1,500원 5개 반짝할인
- 감자칩 1,500원 5개
        - 초코바 1,200원 5개 MD추천상품
- 초코바 1,200원 5개
        - 에너지바 2,000원 5개
        - 정식도시락 6,400원 8개
        - 컵라면 1,700원 1개 MD추천상품
- 컵라면 1,700원 10개

        구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])
[콜라-3],[에너지바-5]

멤버십 할인을 받으시겠습니까? (Y/N)
Y

===========W 편의점=============
상품명		수량	금액
콜라		3 	3,000
에너지바 		5 	10,000
===========증	정=============
콜라		1
==============================
총구매액		8	13,000
행사할인			-1,000
멤버십할인			-3,000
내실돈			 9,000

감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
Y

안녕하세요. W편의점입니다.
현재 보유하고 있는 상품입니다.

- 콜라 1,000원 7개 탄산2+1
- 콜라 1,000원 10개
        - 사이다 1,000원 8개 탄산2+1
- 사이다 1,000원 7개
        - 오렌지주스 1,800원 9개 MD추천상품
- 오렌지주스 1,800원 재고 없음
        - 탄산수 1,200원 5개 탄산2+1
- 탄산수 1,200원 재고 없음
        - 물 500원 10개
        - 비타민워터 1,500원 6개
        - 감자칩 1,500원 5개 반짝할인
- 감자칩 1,500원 5개
        - 초코바 1,200원 5개 MD추천상품
- 초코바 1,200원 5개
        - 에너지바 2,000원 재고 없음
        - 정식도시락 6,400원 8개
        - 컵라면 1,700원 1개 MD추천상품
- 컵라면 1,700원 10개

        구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])
[콜라-10]

현재 콜라 4개는 프로모션 할인이 적용되지 않습니다. 그래도 구매하시겠습니까? (Y/N)
Y

멤버십 할인을 받으시겠습니까? (Y/N)
N

===========W 편의점=============
상품명		수량	금액
콜라		10 	10,000
===========증	정=============
콜라		2
==============================
총구매액		10	10,000
행사할인			-2,000
멤버십할인			-0
내실돈			 8,000

감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
Y

안녕하세요. W편의점입니다.
현재 보유하고 있는 상품입니다.

- 콜라 1,000원 재고 없음 탄산2+1
- 콜라 1,000원 7개 
        - 사이다 1,000원 8개 탄산2+1
- 사이다 1,000원 7개
        - 오렌지주스 1,800원 9개 MD추천상품
- 오렌지주스 1,800원 재고 없음
        - 탄산수 1,200원 5개 탄산2+1
- 탄산수 1,200원 재고 없음
        - 물 500원 10개
        - 비타민워터 1,500원 6개
        - 감자칩 1,500원 5개 반짝할인
- 감자칩 1,500원 5개
        - 초코바 1,200원 5개 MD추천상품
- 초코바 1,200원 5개 
        - 에너지바 2,000원 재고 없음
        - 정식도시락 6,400원 8개
        - 컵라면 1,700원 1개 MD추천상품
- 컵라면 1,700원 10개

        구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])
[오렌지주스-1]

현재 오렌지주스은(는) 1개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)
Y

멤버십 할인을 받으시겠습니까? (Y/N)
Y

===========W 편의점=============
상품명		수량	금액
오렌지주스		2 	3,600
===========증	정=============
오렌지주스		1
==============================
총구매액		2	3,600
행사할인			-1,800
멤버십할인			-0
내실돈			 1,800

감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
N
```